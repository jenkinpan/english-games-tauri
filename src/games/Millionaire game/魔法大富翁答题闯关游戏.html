<!doctype html>

<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>é­”æ³•å¤§å¯Œç¿é—¯å…³å¤ä¹ æ¸¸æˆ</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        color: #fff;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px;
        overflow-x: hidden;
        background-color: #1a1c3d; /* åŠ ä¸ªèƒŒæ™¯è‰²æ›¿ä»£å›¾ç‰‡ */
      }

      .title-bar {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        height: 40px; /* ç¡®ä¿é«˜åº¦è¶³å¤Ÿï¼Œæ¯”å¦‚ 32px æˆ– 40px */
        z-index: 99999; /* ã€å…³é”®ã€‘æå¤§å€¼ï¼Œç¡®ä¿è¦†ç›–æ‰€æœ‰å†…å®¹ */
        background: transparent; /* è°ƒè¯•æ—¶å¯æ”¹ä¸º red */
        cursor: default; /* é¿å…è¯¯å¯¼ï¼Œæ™®é€šæŒ‡é’ˆå³å¯ */

        /* å¿…é¡»åˆ é™¤ä¸‹é¢è¿™ä¸€è¡Œ Electron ä¸“ç”¨ä»£ç  */
        /* -webkit-app-region: drag; */
      }

      .container {
        max-width: 1200px;
        width: 100%;
      }

      header {
        text-align: center;
        margin-bottom: 20px;
        padding: 20px;
      }

      h1 {
        font-size: 2.8rem;
        margin-bottom: 10px;
        text-shadow:
          0 0 15px #6a5af9,
          0 0 25px #6a5af9;
        background: linear-gradient(45deg, #ff6ec4, #7873f5);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: glow 2s ease-in-out infinite alternate;
      }

      .subtitle {
        font-size: 1.2rem;
        color: #a8b2d1;
        margin-bottom: 20px;
      }

      /* æ–°å¢ï¼šæŒ‰é’®å®¹å™¨æ ·å¼ */
      .button-container {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-bottom: 20px;
      }

      .game-container {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        justify-content: center;
      }

      /* æ£‹ç›˜æ ·å¼ */
      .board-container {
        flex: 1;
        min-width: 600px;
        background: rgba(16, 18, 47, 0.7);
        border-radius: 20px;
        padding: 20px;
        box-shadow: 0 0 30px rgba(106, 90, 249, 0.3);
        border: 1px solid rgba(106, 90, 249, 0.5);
        position: relative;
        overflow: hidden;
      }

      .board {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        grid-template-rows: repeat(5, 1fr);
        aspect-ratio: 7/5;
        position: relative;
        border: 2px solid rgba(120, 115, 245, 0.3);
        border-radius: 10px;
        background: rgba(12, 14, 43, 0.8);
        box-shadow: 0 0 40px rgba(106, 90, 249, 0.2);
      }

      .cell {
        display: flex;
        justify-content: center;
        align-items: center;
        border: 1px solid rgba(106, 90, 249, 0.3);
        position: relative;
        font-weight: bold;
        font-size: 1.2rem;
        color: #d6d4f7;
        background: rgba(16, 18, 47, 0.6);
        transition: all 0.3s ease;
      }

      .cell:hover {
        background: rgba(106, 90, 249, 0.3);
        box-shadow: 0 0 15px rgba(106, 90, 249, 0.5);
      }

      .cell.corner {
        background: rgba(106, 90, 249, 0.2);
      }

      .cell.start {
        background: rgba(75, 215, 150, 0.2);
      }

      .player {
        position: absolute;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        z-index: 10;
        transition: all 0.5s ease;
        display: flex;
        justify-content: center;
        align-items: center;
        font-weight: bold;
        box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
      }

      .player-1 {
        background: linear-gradient(135deg, #ff6ec4, #ff8e7d);
      }

      .player-2 {
        background: linear-gradient(135deg, #6a5af9, #4bcefa);
      }

      .player-3 {
        background: linear-gradient(135deg, #42e695, #3bb2b8);
      }

      .player-4 {
        background: linear-gradient(135deg, #ffd700, #ff8c00);
      }

      /* æ§åˆ¶é¢æ¿æ ·å¼ */
      .control-panel {
        flex: 0 0 300px;
        background: rgba(16, 18, 47, 0.7);
        border-radius: 20px;
        padding: 20px;
        display: flex;
        flex-direction: column;
        gap: 20px;
        box-shadow: 0 0 30px rgba(106, 90, 249, 0.3);
        border: 1px solid rgba(106, 90, 249, 0.5);
      }

      .panel-section {
        background: rgba(12, 14, 43, 0.8);
        border-radius: 15px;
        padding: 15px;
        border: 1px solid rgba(106, 90, 249, 0.3);
      }

      .panel-title {
        font-size: 1.3rem;
        margin-bottom: 15px;
        color: #6a5af9;
        text-align: center;
        padding-bottom: 8px;
        border-bottom: 1px solid rgba(106, 90, 249, 0.3);
      }

      .btn {
        background: linear-gradient(45deg, #6a5af9, #4bcefa);
        color: white;
        border: none;
        padding: 12px 20px;
        border-radius: 50px;
        font-size: 1rem;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        width: 100%;
        margin: 5px 0;
        box-shadow: 0 4px 15px rgba(106, 90, 249, 0.3);
      }

      .btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 20px rgba(106, 90, 249, 0.5);
      }

      .btn:active {
        transform: translateY(1px);
      }

      .back-home-btn {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 50px;
        height: 50px;
        background: linear-gradient(45deg, #ff6ec4, #7873f5);
        color: white;
        border: none;
        padding: 0;
        font-size: 1.5rem;
        border-radius: 50%;
        cursor: pointer;
        font-weight: bold;
        text-decoration: none;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 5px 15px rgba(106, 90, 249, 0.4);
        transition: all 0.3s ease;
        z-index: 1000;
        opacity: 0.5;
      }

      .back-home-btn:hover {
        opacity: 1;
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(106, 90, 249, 0.6);
      }

      .back-home-btn:active {
        transform: translateY(1px);
      }

      .btn-reset {
        background: linear-gradient(45deg, #ff6ec4, #ff8e7d);
      }

      .btn-import {
        background: linear-gradient(45deg, #42e695, #3bb2b8);
      }

      /* éª°å­æ ·å¼ */
      .dice-container {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 120px;
        position: relative;
      }

      .dice {
        width: 80px;
        height: 80px;
        background: linear-gradient(135deg, #6a5af9, #4bcefa);
        border-radius: 15px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 2.5rem;
        font-weight: bold;
        color: white;
        cursor: pointer;
        box-shadow: 0 0 20px rgba(106, 90, 249, 0.5);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .dice:before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(
          45deg,
          rgba(255, 255, 255, 0) 0%,
          rgba(255, 255, 255, 0.8) 50%,
          rgba(255, 255, 255, 0) 100%
        );
        transform: rotate(45deg);
        animation: shine 3s infinite linear;
      }

      .dice:hover {
        transform: scale(1.05);
      }

      /* ç©å®¶ä¿¡æ¯ */
      .player-info {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .player-status {
        display: flex;
        align-items: center;
        padding: 10px;
        border-radius: 10px;
        background: rgba(30, 33, 57, 0.5);
      }

      .player-icon {
        width: 25px;
        height: 25px;
        border-radius: 50%;
        margin-right: 10px;
      }

      .player-1-icon {
        background: linear-gradient(135deg, #ff6ec4, #ff8e7d);
      }

      .player-2-icon {
        background: linear-gradient(135deg, #6a5af9, #4bcefa);
      }

      .player-3-icon {
        background: linear-gradient(135deg, #42e695, #3bb2b8);
      }

      .player-4-icon {
        background: linear-gradient(135deg, #ffd700, #ff8c00);
      }

      .current-player {
        background: rgba(106, 90, 249, 0.3);
        box-shadow: 0 0 10px rgba(106, 90, 249, 0.5);
      }

      /* å¼¹çª—æ ·å¼ */
      .modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
      }

      .modal.active {
        opacity: 1;
        pointer-events: all;
      }

      .modal-content {
        background: linear-gradient(135deg, #1a1c3d, #0c0e2b);
        border-radius: 20px;
        width: 90%;
        max-width: 500px;
        padding: 30px;
        text-align: center;
        box-shadow: 0 0 50px rgba(106, 90, 249, 0.5);
        border: 1px solid rgba(106, 90, 249, 0.5);
        transform: scale(0.8);
        opacity: 0;
        transition: all 0.4s ease;
      }

      .modal.active .modal-content {
        transform: scale(1);
        opacity: 1;
      }

      .modal-title {
        font-size: 1.8rem;
        margin-bottom: 20px;
        color: #6a5af9;
      }

      .modal-text {
        font-size: 1.3rem;
        margin: 25px 0;
        color: #d6d4f7;
        min-height: 80px;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
        background: rgba(12, 14, 43, 0.6);
        border-radius: 15px;
        border: 1px solid rgba(106, 90, 249, 0.3);
      }

      .modal-buttons {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 20px;
      }

      .modal-btn {
        padding: 12px 30px;
        border-radius: 50px;
        font-size: 1rem;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        border: none;
        flex: 1;
        max-width: 180px;
      }

      .btn-withdraw {
        background: linear-gradient(45deg, #ff6ec4, #ff8e7d);
        color: white;
      }

      .btn-continue {
        background: linear-gradient(45deg, #42e695, #3bb2b8);
        color: white;
      }

      .btn-meaning {
        background: linear-gradient(45deg, #ffd700, #ff8c00);
        color: white;
      }

      /* åŠ¨ç”» */
      @keyframes glow {
        0% {
          text-shadow:
            0 0 15px #6a5af9,
            0 0 25px #6a5af9;
        }

        100% {
          text-shadow:
            0 0 25px #ff6ec4,
            0 0 35px #ff6ec4;
        }
      }

      @keyframes shine {
        0% {
          transform: rotate(45deg) translateX(-100%);
        }

        100% {
          transform: rotate(45deg) translateX(100%);
        }
      }

      @keyframes diceRoll {
        0% {
          transform: rotate(0deg) scale(1);
        }

        25% {
          transform: rotate(90deg) scale(1.1);
        }

        50% {
          transform: rotate(180deg) scale(1.2);
        }

        75% {
          transform: rotate(270deg) scale(1.1);
        }

        100% {
          transform: rotate(360deg) scale(1);
        }
      }

      .rolling {
        animation: diceRoll 0.5s ease-in-out;
      }

      /* é­”æ³•æ•ˆæœ */
      .magic-particle {
        position: absolute;
        width: 10px;
        height: 10px;
        border-radius: 50%;
        pointer-events: none;
        z-index: 5;
      }

      .board:before {
        content: "";
        position: absolute;
        top: -10px;
        left: -10px;
        right: -10px;
        bottom: -10px;
        background: linear-gradient(45deg, #ff6ec4, #6a5af9, #4bcefa, #42e695);
        z-index: -1;
        filter: blur(20px);
        opacity: 0.3;
        border-radius: 15px;
      }

      /* å“åº”å¼è®¾è®¡ */
      @media (max-width: 950px) {
        .game-container {
          flex-direction: column;
        }

        .board-container {
          min-width: 100%;
        }
      }

      /* æ–°å¢ï¼šæ¸¸æˆè¯´æ˜åŒºæ ·å¼ */
      .game-instructions {
        background: rgba(16, 18, 47, 0.7);
        border-radius: 20px;
        padding: 20px;
        box-shadow: 0 0 30px rgba(106, 90, 249, 0.3);
        border: 1px solid rgba(106, 90, 249, 0.5);
        margin-top: 20px;
        width: 100%;
      }

      .instructions-title {
        font-size: 1.3rem;
        margin-bottom: 15px;
        color: #6a5af9;
        text-align: center;
        padding-bottom: 8px;
        border-bottom: 1px solid rgba(106, 90, 249, 0.3);
      }

      .instructions-text {
        font-size: 1rem;
        color: #d6d4f7;
      }
    </style>
  </head>

  <body>
    <a href="../../index.html" class="back-home-btn">ğŸ </a>
    <div class="title-bar" data-tauri-drag-region></div>
    <div class="container">
      <header>
        <h1>é­”æ³•å¤§å¯Œç¿é—¯å…³å¤ä¹ æ¸¸æˆ</h1>
        <p class="subtitle">å¤šäººPK Â· å¤ä¹ é—¯å…³ Â· è¶£å‘³ç­”é¢˜</p>
        <!-- æ–°å¢ï¼šæŒ‰é’®å®¹å™¨ -->
        <div class="button-container">
          <button class="btn btn-import" id="importBtn">å¯¼å…¥Excelæ–‡ä»¶</button>
          <input
            type="file"
            id="fileInput"
            accept=".xlsx, .xls"
            style="display: none"
          />
          <button class="btn btn-reset" id="resetBtn">é‡ç½®æ¸¸æˆ</button>
        </div>
      </header>

      <div class="game-container">
        <div class="board-container">
          <div class="board" id="gameBoard">
            <!-- æ£‹ç›˜æ ¼å­å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
          </div>
          <!-- ç©å®¶æ£‹å­å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
        </div>

        <div class="control-panel">
          <div class="panel-section">
            <h2 class="panel-title">æ¸¸æˆæ§åˆ¶</h2>
            <button class="btn" id="addPlayerBtn">æ·»åŠ ç©å®¶</button>
            <button class="btn" id="removePlayerBtn">ç§»é™¤ç©å®¶</button>
          </div>

          <div class="panel-section">
            <h2 class="panel-title">æ·éª°å­</h2>
            <div class="dice-container">
              <div class="dice" id="dice">?</div>
            </div>
            <p
              id="diceResult"
              style="text-align: center; margin-top: 10px; color: #d6d4f7"
            >
              ç‚¹å‡»éª°å­å¼€å§‹æ¸¸æˆ
            </p>
          </div>

          <div class="panel-section">
            <h2 class="panel-title">ç©å®¶ä¿¡æ¯</h2>
            <div class="player-info" id="playerInfo">
              <!-- ç©å®¶ä¿¡æ¯å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
            </div>
          </div>
        </div>
      </div>
      <!-- æ–°å¢ï¼šæ¸¸æˆè¯´æ˜åŒº -->
      <div class="game-instructions">
        <h2 class="instructions-title">æ¸¸æˆè¯´æ˜</h2>
        <p class="instructions-text">
          1. å¯¼å…¥Excelæ–‡ä»¶ï¼šç¬¬ä¸€åˆ—ä¸ºé¢˜ç›®ï¼Œç¬¬äºŒåˆ—ä¸ºç­”æ¡ˆï¼Œæ— è¡¨å¤´ã€‚<br />
          2. ç‚¹å‡»â€œæ·»åŠ ç©å®¶â€æˆ–â€œç§»é™¤ç©å®¶â€æ§åˆ¶ç©å®¶äººæ•°ã€‚ <br />
          3. ç©å®¶è½®æµæ·éª°å­ï¼Œå‰è¿›ç›¸åº”æ­¥æ•°ï¼Œå½“å‰è¿›åˆ°æŸä¸ªæ ¼å­æ—¶ï¼Œéœ€è¦å›ç­”é—®é¢˜ã€‚
          <br />
          4. å›ç­”æ­£ç¡®ï¼Œè€å¸ˆç‚¹å‡»â€œç»§ç»­æ¸¸æˆâ€æŒ‰é’®ï¼Œè½®åˆ°ä¸‹ä¸€ä½ç©å®¶æŠ•éª°å­ã€‚<br />
          5. å›ç­”é”™è¯¯ï¼Œè€å¸ˆç‚¹å‡»â€œç­”é”™åé€€â€æŒ‰é’®ï¼Œç©å®¶å›åˆ°ä¸Šä¸€ä½ç½®ã€‚<br />
          6.
          å½“ä¸€ä¸ªç©å®¶åˆ°è¾¾ç»ˆç‚¹æˆ–è¶…å‡ºç»ˆç‚¹ä½ç½®ï¼Œåˆ™è¯¥ç©å®¶ç»“æŸæ¸¸æˆã€‚å…¶ä»–ç©å®¶å¯ä»¥ç»§ç»­æ¸¸æˆã€‚
        </p>
      </div>
    </div>

    <!-- å¼¹çª— -->
    <div class="modal" id="phraseModal">
      <div class="modal-content">
        <h2 class="modal-title">å¤§å¯Œç¿é—¯å…³</h2>
        <div class="modal-text" id="phraseText">æ­£åœ¨åŠ è½½...</div>
        <div class="modal-buttons">
          <button class="modal-btn btn-withdraw" id="withdrawBtn">
            ç­”é”™åé€€
          </button>
          <button class="modal-btn btn-continue" id="continueBtn">
            ç»§ç»­æ¸¸æˆ
          </button>
          <button class="modal-btn btn-meaning" id="meaningBtn">
            æŸ¥çœ‹ç­”æ¡ˆ
          </button>
        </div>
      </div>
    </div>

    <div class="modal" id="winModal">
      <div class="modal-content">
        <h2 class="modal-title">æ¸¸æˆç»“æŸ</h2>
        <div class="modal-text" id="winText">æ­å–œç©å®¶åˆ°è¾¾ç»ˆç‚¹ï¼</div>
        <div class="modal-buttons">
          <button
            class="btn btn-reset"
            id="winResetBtn"
            style="margin-top: 20px"
          >
            é‡æ–°å¼€å§‹æ¸¸æˆ
          </button>
          <button class="btn btn-continue" id="continuePlayingBtn">
            ç»§ç»­æ¸¸æˆ
          </button>
        </div>
      </div>
    </div>
    <script type="module" src="script.js"></script>
  </body>
</html>
